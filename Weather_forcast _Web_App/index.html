<!DOCTYPE html>
<html>
<head>
<meta charset ="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>    
    <script src="http://openlayers.org/api/OpenLayers.js"></script>
    <script src="http://openweathermap.org/js/OWM.OpenLayers.1.3.4.js"></script>
    <script src="http://cdn.jsdelivr.net/jquery.validation/1.14.0/jquery.validate.js"></script>
   <script type="text/javascript" src="moment.js"></script>
	
	<script type="text/javascript" src="moment-timezone-with-data.js"></script>
    
    
    
    
    
    <title>Bootstrap</title></head>
    
    <script type="text/javascript">
    var tab1 = {
    icon : "John",
    desc  : "Doe",
    temp       : "50",
    high  : "70",
    low   : "75",
    precep:"none",
    rain  :"0%",
    wind  :"wind",
    dew   :"65",
    humidity:"84%",
    visibility:"9.08mi",
    sunrise:"2:00",
    sunset : "3:00", 
};
    </script>
    
<style>
    .mydiv
    {
      
        height: 460px;
    
    }

    .nav-pills > li{
			background-color: #EEEEEE;  
		}
    
    
    .table-striped>tbody>tr:nth-child(even)>td,
.table-striped>tbody>tr:nth-child(even)>th {
	background-color: lightpink;
}
  
    
tr.collapse.in {
    display: table-row;
} 
    
.settab
{
   margin-left: 6px;
   margin-right: 6px;
    margin-top: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
}
    
.tablecolor
    {
        background-color: #EEEEEE;
    }
    
.Temp
{
    font-size: 57px;
}

.MaxMin{
    padding-top: 25px;
}
.color_white
    {
        style="color:white";
    }
.color_blue
    {
         style="color:blue";
    }
    .color_green
    {
         style="color:green";
    }
    
    .table{
			background-color: white;  
		}
    
    

/* For width larger than 780px: */
.media_tab {
    background-color: black; 
    }

    @media only screen and (max-width : 768px){
  .media_tab {
       background-color: rgba(180, 180, 180, 0);
    }
	}


        
    
}
    
    
    
    
    
  
.icon {
  max-width: 150px;
  margin: 0 auto;
  display: block;
  color: white;
}

.FCcolor{
    font-size: 25px;
}
    
    
    .boldedtext{
    font-weight: bold;
font-size: 18px;
}



.basict3{
   background-color:#327CB7;; 
     margin-right: 6px;
    margin-top: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
}
.tab_alignment
{
   margin-left: 6px;
   margin-right: 6px;
    margin-top: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
}

    
      body {
    background-image: url("http://cs-server.usc.edu:45678/hw/hw8/images/bg.jpg");
}
.clm
{
background-color: rgba(180,180,180,0.6);    

}

    
.alignImage
		{
			margin-left: auto;
			margin-right: auto;
			text-align: center;
			vertical-align: middle
		}    
    
    
    
    
.danger1
{
    background-color: rgba(180,180,180,0.1);
    border: 0;
    width: 200px;
}
.danger_street
{
    background-color: rgba(180,180,180,0.1);
    border: 0;
    width: 230px;
}
.tab1
{
    background-color:rgb(218, 108, 108);
}
.class_sup{
    top: -1.5em;
    font-size: 20px;
}
    
  
    
    
    
    
</style>
    
    
    
<body> 
<div ><h2><center>Forecast Search</center></h2></div>
<div class="container" >
   <div class="clm">
  <form role="form" class="form-inline" id="forms" name="myForm">
      
    <div class="form-group ">
    <div class="input-group"><span style="color:white"> 
        <label for="address">Street Address:<span style="color:red">*</span></label><br/></span>
      <input type="text" class="form-control" name ="address" id="address" placeholder="Enter street address">
          <p id="streetaddresserror" style="color:red;font-size:12px;"> </p> 
        </div></div>
    
      
    <div class="form-group ">
        <div class="input-group"><span style="color:white"> 
            <label for="city">City:<span style="color:red">*<span style="color:red"></span></label><br/></span>
      <input type="text" class="form-control" name="city" id="city" placeholder="Enter the city name">
          <p id="townerror" style="color:red;font-size:12px;"> </p>
        </div></div>
   
     
      
      <div class="form-group ">
          <div class="input-group"><span style="color:white"> 
              <label for="selectedvalue">State:<span style="color:red">*</span></label><br/></span>
  <select name="states" id="selectedvalue"  class="form-control" placeholder="Enter your state">
                    <option value="" selected>Enter your state</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="DC">District Of Columbia</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>   
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>   
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SC">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="MY">Wyoming</option>
            </select>
             <p id="Stateerror" style="color:red;font-size:12px;"> </p> 
          </div></div>
	
      
      		

      
      
      
      <div class="input-group">
          <b><span style="color:white">      Degree:<br></span></b>
              <div class="radio "><b><span style="color:white"> 
     <label><input type="radio" name="temp" id ="temp" value ="Fahrenheit"checked>Fahrenheit</label>
                  </div></span></b>
    <div class="radio"><span style="color:white"> <b>
      <label><input type="radio" name="temp"  id ="temp" value="Celsius" >Celsius</label>
    </div></div></b></span>
     
      
    <div class="input-group">  
        <br><br>
    <button type="submit" class="btn btn-info" name = "search">
          <span class="glyphicon glyphicon-search"></span> Search
        </button>
    
          <button type="button" id="clear" >
          <span class="glyphicon glyphicon-refresh"></span> Clear
        </button><br><span style="color:white"> 
        <p>Powered by </span><a href="http://forecast.io"><img src="http://cs-server.usc.edu:45678/hw/hw8/images/forecast_logo.png" alt="Forcast Icon" style="width:50px;height:50px;"></a>
        </p></dvi>
	
      
     </div>
        </div>    
        </div>
        
        
        
      <br>
      <br>
      <br>
      <br>
        

      <div class="container-fluid" >				
					<div  id="tab_heading">
					  
						 <ul class="nav nav-pills">
							<li class="active"><a data-toggle="pill" href="#rightnow"><span style="font-size:12px">Right Now</span></a></li>							
                             <li><a data-toggle="pill" href="#next24"><span style="font-size:12px">Next 24 Hours</span></a></li>
                             <li><a data-toggle="pill" href="#next7"><span style="font-size:12px">Next 7 Days</span></a></li>
						  </ul>
          </div>		  
						  <div class="tab-content" id="tab_data">
								<div id="rightnow" class="tab-pane fade in active" >
																
																			
										<div class="col-lg-12">
                                            <div class="col-lg-6 ">
											    <div id ="tab1id1" class=" col-lg-6" style="background-color:rgb(218, 108, 108)">
												    
												</div>
                                                
												<div id ="tab1id2" class= "col-lg-6" style="background-color:rgb(218, 108, 108)">
                                                    
                                                    
                                                </div>												
											  <div id="table0" >
                                                
                                                
                                                </div>
												 </div>
                                            
                                                <section id="InsideParent">
												
										        </section>
                                            
                                            
                                            
											  
                                            </div>
										    
								</div>
								<div id="next24" class="tab-pane fade tablecolor ">
								  																
								</div>
                              
                              <div id="next7" class="tab-pane fade">
                         <!--   //Tab 3 contents here###############################################################-->
                                  
<div class="container media_tab" >

  <div class="row">
       
    <section class=" basict3 col-lg-1 col-lg-offset-2" role="button" data-toggle="modal" data-target="#myModal" style="text-align:center;">
        <div id="value1Line1"> </div>  
		<div id="value1Line2"></div>
        <div id="value1Line3"></div>
        <div id="value1Line4"></div>
        <div id="value1Line5" class="FCcolor"></div>
        <div id="value1Line6"></div>
        <div id="value1Line7" class="FCcolor"></div>
    </section>

 <section class="tab_alignment col-lg-1" role="button" data-toggle="modal" data-target="#myModal2" style="background-color:#EF423E;text-align:center;">
        <div id="value2Line1"></div>
        <div id="value2Line2"></div>
        <div id="value2Line3"></div>
        <div id="value2Line4"></div>
        <div id="value2Line5" class="FCcolor"></div>
        <div id="value2Line6"></div>
        <div id="value2Line7" class="FCcolor"></div>
    </section>

  <section class=" tab_alignment col-lg-1" role="button" data-toggle="modal" data-target="#myModal3" style="background-color: #E88E48;text-align:center;">
        <div id="value3Line1"></div>
        <div id="value3Line2"></div>
        <div id="value3Line3"></div>
        <div id="value3Line4"></div>
        <div id="value3Line5" class="FCcolor"></div>
        <div id="value3Line6"></div>
        <div id="value3Line7" class="FCcolor"></div>
    </section>

   <section class=" tab_alignment col-lg-1" role="button" data-toggle="modal" data-target="#myModal4" style="background-color:#A7A52E;text-align:center;">
        <div id="value4Line1"></div>
        <div id="value4Line2"></div>
        <div id="value4Line3"></div>
        <div id="value4Line4"></div>
        <div id="value4Line5" class="FCcolor"></div>
        <div id="value4Line6"></div>
        <div id="value4Line7" class="FCcolor"></div>
    </section>

   <section class=" tab_alignment col-lg-1" role="button" data-toggle="modal" data-target="#myModal5" style="background-color:#986EA8;text-align:center;">
        <div id="value5Line1"></div>
        <div id="value5Line2"></div>
        <div id="value5Line3"></div>
        <div id="value5Line4"></div>
        <div id="value5Line5" class="FCcolor"></div>
        <div id="value5Line6"></div>
        <div id="value5Line7" class="FCcolor"></div>
    </section>

 <section class=" tab_alignment col-lg-1" role="button" data-toggle="modal" data-target="#myModal6" style="background-color:#F57B7C;text-align:center; ">
        <div id="value6Line1"></div>
        <div id="value6Line2"></div>
        <div id="value6Line3"></div>
        <div id="value6Line4"></div>
        <div id="value6Line5" class="FCcolor"></div>
        <div id="value6Line6"></div>
        <div id="value6Line7" class="FCcolor"></div>
    </section>
    <section class="  tab_alignment col-lg-1" role="button" data-toggle="modal" data-target="#myModal7" style="background-color:#D04270;text-align:center;">
        <div id="value7Line1"></div>
        <div id="value7Line2"></div>
        <div id="value7Line3"></div>
        <div id="value7Line4"></div>
        <div id="value7Line5" class="FCcolor"></div>
        <div id="value7Line6"></div>
        <div id="value7Line7" class="FCcolor"></div>
    </section>   
	
  </div><!-- row -->   
</div>
         
<!--Start of modal divs-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel1">Modal title</h4>
          </div>
        
           <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
                <div class="Row"> 
                    <div id="Iimg1" class="alignImage"></div>
                    <div id="mode1" style="font-size: 22px;"></div>
                </div>

                <div class="Row">
                    <div class="col-lg-4">
                        <div id="sunrise1"> </div>
                        <div id="windspeed1"></div>           
                    </div>

                    <div  class="col-lg-4">
                        <div id="sunset1"></div>
                        <div id="visibility1"></div>          
                                                    
                    </div>

                     <div class="col-lg-4">
                        <div id="humidity1"></div>   
                       <div id="Pressure1"></div>
                     </div>
                </div>
         
            </div>   
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>  
      </div>
  </div>
</div>

<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel2">Modal title</h4>
          </div>
        
           <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
                <div class="Row"> 
                    <div id="Iimg2" class="alignImage"></div>
                    <div id="mode2" style="font-size: 22px;"></div>
                </div>

                <div class="Row">
                    <div class="col-lg-4">
                        <div id="sunrise2"> </div>
                        <div id="windspeed2"></div>           
                    </div>

                    <div  class="col-lg-4">
                        <div id="sunset2"></div>
                        <div id="visibility2"></div>          
                                                    
                    </div>

                     <div class="col-lg-4">
                        <div id="humidity2"></div>   
                       <div id="Pressure2"></div>
                     </div>
                </div>
         
            </div>   
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>  
      </div>
  </div>
</div>





 <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel3">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel3">Modal title</h4>
      </div>
       <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
                <div class="Row"> 
                    <div id="Iimg3" class="alignImage"></div>
                     <div id="mode3" style="font-size: 22px;"></div>
                </div>
                <div class="Row">
                    <div class="col-lg-4">
                      <div id="sunrise3"></div>
                      <div id="windspeed3"></div>        
                    </div>
                    <div  class="col-lg-4">
                      <div id="sunset3"></div>
                      <div id="visibility3"></div>
                    </div>
                    <div class="col-lg-4">
                      <div id="humidity3"></div>
                      <div id="Pressure3"></div>
                    </div>
                 </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
       </div>
   </div>
</div>


<div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel4">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel4">Modal title</h4>
      </div>
      <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
                <div class="Row"> 
                  <div id="Iimg4" class="alignImage"></div>
                  <div id="mode4" style="font-size: 22px;"></div>
                </div>
                <div class="Row">
                    <div class="col-lg-4">
                      <div id="sunrise4"></div>
                      <div id="windspeed4"></div>        
                    </div>
                    <div  class="col-lg-4">
                      <div id="sunset4"></div>
                      <div id="visibility4"></div>
                    </div>
                     <div class="col-lg-4">
                       <div id="humidity4"></div>
                       <div id="Pressure4"></div>
                    </div>
                  </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
  </div>
</div>



<div class="modal fade" id="myModal5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel5">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel5">Modal title</h4>
          </div>
        
           <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
                <div class="Row"> 
                    <div id="Iimg5" class="alignImage"></div>
                    <div id="mode5" style="font-size: 22px;"></div>
                </div>

                <div class="Row">
                    <div class="col-lg-4">
                        <div id="sunrise5"> </div>
                        <div id="windspeed5"></div>           
                    </div>

                    <div  class="col-lg-4">
                        <div id="sunset5"></div>
                        <div id="visibility5"></div>          
                                                    
                    </div>

                     <div class="col-lg-4">
                        <div id="humidity5"></div>   
                       <div id="Pressure5"></div>
                     </div>
                </div>
         
            </div>   
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>  
      </div>
  </div>
</div>



<div class="modal fade" id="myModal6" tabindex="-1" role="dialog" aria-labelledby="myModalLabel6">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel6">Modal title</h4>
          </div>
        
           <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
                <div class="Row"> 
                    <div id="Iimg6" class="alignImage"></div>
                    <div id="mode1" style="font-size: 22px;"></div>
                </div>

                <div class="Row">
                    <div class="col-lg-4">
                        <div id="sunrise6"> </div>
                        <div id="windspeed6"></div>           
                    </div>

                    <div  class="col-lg-4">
                        <div id="sunset6"></div>
                        <div id="visibility6"></div>          
                                                    
                    </div>

                     <div class="col-lg-4">
                        <div id="humidity6"></div>   
                       <div id="Pressure6"></div>
                     </div>
                </div>
         
            </div>   
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>  
      </div>
  </div>
</div>


<div class="modal fade" id="myModal7" tabindex="-1" role="dialog" aria-labelledby="myModalLabel7">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel7">Modal title</h4>
      </div>
      <div class="modal-body" style="text-align: -moz-center;overflow-y: hidden;">
            <div class="Row"> 
             <div id="Iimg7" class="alignImage"></div>
             <div id="mode7" style="font-size: 22px;"></div>
            </div>
            <div class="Row">
                 <div class="col-lg-4">
                    <div id="sunrise7"></div>
                    <div id="windspeed7"></div>        
                 </div>
                 <div  class="col-lg-4">
                   <div id="sunset7"></div>
                   <div id="visibility7"></div>
                 </div>
                 <div class="col-lg-4">
                   <div id="humidity7"></div>
                    <div id="Pressure7"></div>
                  </div>
             </div> 
        </div>
       <div class="modal-footer">
         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
       </div>
    </div>
  </div>
</div>      
                              
                        
                                  
<!--//End of Tab 3 contents################################################################################################################# -->                                 

                                 </div>
                              
                              
                              
								</div>
							</div>
                            <script type="text/javascript">
                                var div = document.getElementById('tab_data');
                                var div2 = document.getElementById('tab_heading');
                                    
                                // hide
                                div.style.visibility = 'hidden';
                                div2.style.visibility = 'hidden';
                            </script>
						  
					
				     
        
   
<!-- jQuery -->

<script>
    
    
            function manageFBCLICK()
			{
				FB.ui(
				{
				 method: 'share',
				 href: 'http://forecast.io/'
				}, function(response){
					if (response && !response.error_message) {alert('Facebook message Posted Successfully' );
						} else {alert('Not Posted');
						}
				});				  			
			}

         
function clearf(){			
				document.getElementById("tab_data").style.visibility="hidden";
				document.getElementById("tab_heading").style.visibility="hidden";
				$("#address").val("");
                $("#mydiv").val("");
				$("#city").val("");				
				document.getElementsByName("temp")[0].checked = true;
				document.getElementsByName("states")[0].selectedIndex = 0;	
				$("#streetaddresserror").val("");
				$("#townerror").val("");
				$("#Stateerror").val("");
                $("#mymap").remove();
			}			
			
        
     
    
    
    
    function ReturnImage(frame)
			{
				var image="";
			     switch(frame)
					{
						case "clear-day":image ="clear.png";break;
						case "clear-night":image ="clear_night.png";break;
						case "rain":image ="rain.png";break;
						case "snow":image ="snow.png";break;
						case "sleet":image="sleet.png";break;
						case "wind":image ="wind.png";break;
						case "fog":image ="fog.png";break;
						case "cloudy":image ="cloudy.png";break;
						case "partly-cloudy-day":image ="cloud_day.png";break;
						case "partly-cloudy-night":image ="cloud_night.png";break;
						default : break;
					}
					return "http://cs-server.usc.edu:45678/hw/hw8/images/"+image;
			}
    
    
    function printObj() {
  // e.preventDefault();
  var obj = {
                                    address:$("#address").val(),
                                    city:$("#city").val(),
                                    state:$("#selectedvalue").val(),
                                    temperature:temperatureValue,                                //hardcoded for now.
  }
  //console.log(obj);
        
        
        
        var temperatureValue = $("input[name=temp]:checked").val();
       // alert(temperatureValue);
         $.ajax({
                            url: "server.php",	
             
                            data: 
                                { 							
                                    address:$("#address").val(),
                                    city:$("#city").val(),
                                    state:$("#selectedvalue").val(),
                                    temperature:temperatureValue,
                                 
                                },
                            type: "GET",
                            success: function(output) {
                              //  alert(output);
                                //console.dir(output);
                               // var obj = jQuery.parseJSON( '{ "name": "John" }' );
                                //alert( obj.name === "John" );
                              //  alert("success");
                                var json = $.parseJSON(output);
                                
                                 var mapcreator="<div class=\"col-lg-6 mydiv\" id=\"mymap\" ></div>";
                                    $("#InsideParent").html(mapcreator);
                                
                                
                               // alert(json.currently.icon);
                                myFunctionTab1(json);
                                tab2data(json);
                            settab3data(json);
                            
                            },
                            error: 
                            function(response) {					  
                              alert("PHP : Error");
                            }
                    });
                
                window.fbAsyncInit = function() {
					FB.init({
					 appId      : '1630441220549512',
					 xfbml      : true,
					 version    : 'v2.5'
					});
				 };

				 (function(d, s, id){
					var js, fjs = d.getElementsByTagName(s)[0];
					if (d.getElementById(id)) {return;}
					js = d.createElement(s); js.id = id;
					js.src = "//connect.facebook.net/en_US/sdk.js";
					fjs.parentNode.insertBefore(js, fjs);
				  }(document, 'script', 'facebook-jssdk'));
        
        
          var div = document.getElementById('tab_data');
                                var div2 = document.getElementById('tab_heading');
                                    
                                // hide
                                div.style.visibility = 'visible';
                                div2.style.visibility = 'visible';
        
        
        
        
}	
    
     function tab2data(json)
			{
    var temperatureValue = $("input[name=temp]:checked").val();


var temperatureValue = $("input[name=temp]:checked").val();
                var degree,windspeed,dewpoint,visibility1,pressure1;
           if(temperatureValue =="Fahrenheit")
            {
                 degree ="&deg;F";
                 windspeed = "mph";
                dewpoint ="&deg;F";
                visibility1 =  "mi";
                pressure1 ="mb";
            }
            else
            {
                 degree ="&deg;C";
                 windspeed = "m/s";
                dewpoint ="&deg;F";
                visibility1 =  "km";
                pressure1 ="hPa";
            }


                
                
                
                
				var output = "";
                	var theaded = "<table class=\"table\" style=\"background-color:#2C70AB;\"><b><thead class=\"info\"><td><span style=\"color:white;\"> Time </span></td><td><span style=\"color:white;\"> Summary</span> </td><td><span style=\"color:white;\"> Cloud Cover</span> </td><td><span style=\"color:white;\"> Temp("+degree+")</span> </td><td><span style=\"color:white;\"> View Details </span></td></thead></b>";
				
                var htmlout = theaded;

				for(var i =1;i<25;i++)
				 {
					   var time = json.hourly.data[i].time
					   var teatime = new Date(Number(time));
                     
                     
                     
                           
        
var format = 'hh:mm A';
var mytime = moment(time * 1000).tz(json.timezone).format(format);
      //  alert("myalert"+mytime)
        
/*if(mytime>12)
{
    mytime=(mytime-12);
        mytime=mytime+"PM";
}
else
{
     mytime=mytime+"AM";
    
}*/

                     
                     
                     
    			
					var month = teatime.getMonth();
					
					var day = teatime.getDay();

					var year = teatime.getYear();

					var hour = teatime.getHours();
					 
					 var icon=ReturnImage(json.hourly.data[i].icon);

					 var cloudcovered = Math.floor(json.hourly.data[i].cloudCover)+"%";

					 var temperatures=json.hourly.data[i].temperature;

					 var wind=json.hourly.data[i].windSpeed;

					 var humidity=Math.floor(json.hourly.data[i].humidity);

					 var visibility = json.hourly.data[i].visibility;

					 var pressure = json.hourly.data[i].pressure;

					 var ids="ids"+i;

					
var output = "<table class=\"table\"><tr><td>" +mytime+" </td><td>"+"<img src="+icon+" width=50px height=50px/>  </td><td>" + cloudcovered +" </td><td> "+ temperatures +" </td><td><button type=\"button\" class=\"btn btn-info\" data-toggle=\"collapse\" data-target=\"#"+ids+"\"><span class=\"glyphicon glyphicon-plus\"></span></button</td></tr></table><div id=\""+ids+"\" class=\"collapse\"><table class=\"table\"> <thead><td>Wind</td><td>Humidity</td><td>Visibility</td><td>Pressure</td></thead> <tr><td>"+wind+windspeed+"</td><td>"+humidity+"%</td><td>"+visibility+visibility1+"</td><td>"+pressure+pressure1+"</td></tr></table> </div>";
                     
				 	 htmlout += output;
				 }
                $("#next24").html(htmlout);
			}
			
    
/*    
var temperatureValue = $("input[name=temp]:checked").val();
                var degree,windspeed,dewpoint,visibility,pressure;
           if(temperatureValue =="Fahrenheit")
            {
                 degree ="&deg;F";
                 windspeed = "mph";
                dewpoint ="&deg;F";
                visibility =  "mi";
                pressure ="mb";
            }
            else
            {
                 degree ="&deg;C";
                 windspeed = "m/s";
                dewpoint ="&deg;F";
                visibility =  "km";
                pressure ="hPa";
            }*/


    
    
    
    
    
    function myFunctionTab1(json){
    
                                tab1.icon = json.currently.icon;
                                tab1.desc = json.currently.summary;
                                tab1.temp = json.currently.temperature;
                                tab1.high = json.daily.data[0].temperatureMax;
                                tab1.low = json.daily.data[0].temperatureMin;
                                
                                 tab1.precep = json.currently.precipIntensity;
                                tab1.rain = Math.floor(json.currently.precipProbability*100)+"%";
                                tab1.wind = json.currently.windSpeed;
                                tab1.dew = json.currently.dewPoint;
                                tab1.humidity =json.currently.humidity;
                                
                                 tab1.visibility = json.currently.visibility;
                                tab1.sunrise = json.daily.data[0].sunriseTime;
                                tab1.sunset = json.daily.data[0].sunsetTime;
                               
                                 //alert("\n icon"+tab1.icon);
                                   //    alert("\n description"+tab1.desc+"\n temperature"+tab1.temp+"\n high"+tab1.high+"\n low"+tab1.low+"\n precep"+tab1.precep+"\n rain"+tab1.rain+"\n wind"+tab1.wind+"\n dew"+tab1.dew+"\n humidity"+tab1.humidity+"\n visibility"+tab1.visibility+"\n sunrise"+tab1.sunrise+"\n sunset"+tab1.sunset);
        width = 250;
       // alert("dewpoint"+json.currently.dewPoint);
        //alert("precipitation"+json.currently.precipIntensity);
        //alert("chance of rain"+json.currently.precipProbablity);
        //alert("sunset"+json.daily.data[0].sunriseTime);
        //alert("sunrise"+json.daily.data[0].sunsetTime);
    
        

var sunrise=  tab1.sunrise;
var sunset = tab1.sunset;
        
        //alert("timezone:"+json.timezone);
    // alert(sunrise+" "+sunset);
        
        
        
        
var format = 'hh:mm A';
var Sunrise = moment(sunrise * 1000).tz(json.timezone).format(format);
    
        
        
        
 //var myDate    = new Date(timestamp * 1000);
        
var format = 'hh:mm A';
var Sunset = moment(sunset * 1000).tz(json.timezone).format(format);
        
        
        
         // alert("sunrise:"+Sunrise);
        //alert("sunset:"+Sunset);
        
        
/*
    daterise = new Date(sunrise);
	dateset  = new Date(sunset);

      /*  
    // alert("sunrise "+moment.tz(sunrise, json.timezone).format());
     
        
 var date = new Date(sunrise*1000);
// Hours part from the timestamp
var hours = date.getHours();
// Minutes part from the timestamp
var minutes = "0" + date.getMinutes();
// Seconds part from the timestamp
var seconds = "0" + date.getSeconds();

// Will display time in 10:30:23 format
var formattedsunriseTime = hours + ':' + minutes.substr(-2) ;
        
        
        
        
        
 var date1 = new Date(sunset*1000);
// Hours part from the timestamp
var hours1 = date1.getHours();
// Minutes part from the timestamp
var minutes1 = "0" + date1.getMinutes();
// Seconds part from the timestamp
var seconds1 = "0" + date1.getSeconds();
       
var formattedsunsetTime = hours1 + ':' + minutes1.substr(-2) ; */      
        var formattedsunsetTime =0;
        
        
        //alert("sunrise"+formattedTime);
        
     
     
var precipitation;
var prepensity1;	
	
	 var temperatureValue = $("input[name=temp]:checked").val();
if(temperatureValue == "Celsius" )
{
   prepensity1 = tab1.precep ;
   // prepensity1 = (prepensity1/25.4);
}
else{
         prepensity1 = tab1.precep ;
}
 
    
    
if((prepensity1 >= 0)&&(prepensity1 < 0.002))
    {
        precipitation="None";   
    }
if((prepensity1 >= 0.002)&&(prepensity1 < 0.017))
{
   precipitation="Very Light"; 
}
if((prepensity1 >= 0.017)&&(prepensity1 < 0.1))
precipitation="Light";

if((prepensity1 >= 0.1)&&(prepensity1 < 0.4))
precipitation="Moderate";

if((prepensity1 >=0.4))
precipitation="Heavy";    
    

   // timezone
        
        
        
        
        
        
        if(tab1.icon == "clear-night")   
{
 var src = "http://cs-server.usc.edu:45678/hw/hw8/images/clear_night.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"  
 }     
if(tab1.icon == "Storm") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/Storm.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}


if(tab1.icon == "clear-day") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/clear.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}

if(tab1.icon == "rain") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/rain.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}

if(tab1.icon == "snow") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/snow.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}
if(tab1.icon == "sleet") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/sleet.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}

if(tab1.icon == "wind") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/wind.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}

if(tab1.icon == "fog") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/fog.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}

if((tab1.icon == "partly-cloudy-day")) 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/cloud_day.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}

if(tab1.icon == "partly-cloudy-night") 
{
    var src = "http://cs-server.usc.edu:45678/hw/hw8/images/cloud_night.png";
var srct= "<img src="+src+" alt="+tab1.desc+" title="+tab1.desc+">"            
}              
                        
    var sec2 ="<p> "+tab1.desc+" in "+$("#city").val()+","+$("#selectedvalue").val()+"</p>";
        
       var degree;
        var temperatureVaalue = $("input[name=temp]:checked").val();
        var tempType ;
        if(temperatureVaalue =="Fahrenheit")
            {
                 degree ="&deg;F";
                tempType = "<sup class=\"class_sup\">&#8457</sup>";
            }
        else
            {
                 degree ="&deg;C";
                tempType = " <sup class=\"class_sup\">&#8451</sup>"
            }
         
        /*
        if(tempUnit == "Fahrenheit")
				   
			   else
				   
        */
        
        
        
         $('#tab1id1').html('<img width="162px" id="myimg"/>');  
          $("#myimg").attr("src",src);
        $("#myimg").attr("alt",tab1.desc);
        $("#myimg").attr("title",tab1.desc);
    
        
        var intvalue = Math.floor( tab1.temp );
      //  var h2temp = "<p style=\"font-size=57\">"+intvalue+degree+"</p>";
        var h2temp = "<h4 class=Temp ><span style=\"color: white;\">"+intvalue+tempType+"</span></h4>";
        var facebook = "<img id=\"fb\" src=\"http://cs-server.usc.edu:45678/hw/hw8/images/fb_icon.png\" style =\"padding:0;margin:0;\" width=\"30px\" height=\"25px\" />";

  //  $('#tab1id2').append(sec2);  
//    $('#tab1id2').append("<br><br>");      
   // $('#tab1id2').append(h2temp);      
    tempmax =    Math.floor( tab1.high );
    tempmin =    Math.floor( tab1.low );
     //$('#tab1id2').append(tempmax);  
       //  $('#tab1id2').append(tempmin);  
        $('#tab1id2').html("<span style=\"color: white;\">"+sec2+"</span>"+h2temp+"<p class='MaxMin'><span style=\"color: blue;\">L:"+tempmin+"&deg;</span>|<span style=\"color: green;\">H:"+ tempmax+"&deg;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+facebook+"</p>"); 
        
        
        
        
    
$("#fb").on('click', function (e) {
					//alert("facebook post is success");
					manageFBCLICK();
				})



var temperatureValue = $("input[name=temp]:checked").val();
                var degree,windspeed,dewpoint,visibility,pressure;
           if(temperatureValue =="Fahrenheit")
            {
                 degree ="&deg;F";
                 windspeed = "mph";
                dewpoint ="&deg;F";
                visibility =  "mi";
                pressure ="mb";
            }
            else
            {
                 degree ="&deg;C";
                 windspeed = "m/s";
                dewpoint ="&deg;C";
                visibility =  "km";
                pressure ="hPa";
            }



        


        
        
        $('#table0').html("<table class= 'table table-striped' ><tbody><tr><td>Precipitation</td><td>"+precipitation+"</td></tr><tr><td>Chance of Rain</td><td>"+tab1.rain+"</td></tr><tr><td>Wind Speed</td><td>"+tab1.wind+windspeed+"</td></tr><tr><td>Dew Point</td><td>"+tab1.dew+dewpoint+"</td></tr><tr><td>Humidity</td><td>"+((tab1.humidity)*100)+"%</td></tr><tr><td>Visibility</td><td>"+tab1.visibility+visibility+"</td></tr><tr><td>Sunrise</td><td>"+Sunrise+"</td></tr><tr><td>Sunset</td><td>"+Sunset+"</td></tr></tbody></table>");
       /* <table class="table table-striped " id ="table1">
													<tbody>
													  <tr>
														<td>Precipitation</td>
		 												<td>Doe</td>											
													  </tr>
													  <tr >
														<td>Chances of Rain</td>
														<td>Moe</td>
													  </tr>										  
													</tbody>
												  </table>*/
    var latitude = json.latitude;
    var longitude = json.longitude;    
  //  alert("test_lat"+latitude+"longi"+longitude);    
   
//Center of map
    var lonlat = new OpenLayers.LonLat(longitude, latitude);

    var map = new OpenLayers.Map("mymap");
    // Create OSM overlays
    var mapnik = new OpenLayers.Layer.OSM();     
        
         var layer_cloud = new OpenLayers.Layer.XYZ(
        "clouds",
        "http://${s}.tile.openweathermap.org/map/clouds/${z}/${x}/${y}.png",
        {
            isBaseLayer: false,
            opacity: 0.7,
            sphericalMercator: true
        }
    );

    var layer_precipitation = new OpenLayers.Layer.XYZ(
        "precipitation",
        "http://${s}.tile.openweathermap.org/map/precipitation/${z}/${x}/${y}.png",
        {
            isBaseLayer: false,
            opacity: 0.7,
            sphericalMercator: true
        }
    );

        var zoom = 9;
    map.addLayers([mapnik, layer_precipitation, layer_cloud]);
    //map.setCenter( lonlat, 10 );    
        map.setCenter(new OpenLayers.LonLat(longitude, latitude).transform('EPSG:4326', 'EPSG:3857'), zoom);
        

    }
/*
      var tab1 = {
    icon : "John",
    desc  : "Doe",
    temp       : "50",
    high  : "70",
    low   : "75",
    precep:"none",
    rain  :"0%",
    wind  :"wind",
    dew   :"65",
    humidity:"84%",
    visibility:"9.08mi",
    sunrise:"2:00",
    sunset : "3:00", 
};*/
    
    
    
    
    $(document).ready(function(){
        
        
        
    $.validator.addMethod("towncheck", function (value) {
        if (value.replace(/^\s+|\s+$/g, "").length !== 0) {
            return true;
        }
    }, "Please enter the city");
        
    $.validator.addMethod('temperaturecheck', function (value) {
        return (value !== 'Enter your state');
    }, "Please select a state");
        
    $.validator.addMethod('streetaddresscheck', function (value) {
        if (value.replace(/^\s+|\s+$/g, "").length !== 0) {
            return true;
        }
    }, "Please enter the street address");
    $("#forms").validate({
        rules: {
            address: {
                required: true,
                 streetaddresscheck: true
            },
            city: {
                required: true,
               towncheck: true
            },
            states: {
                required: true,
                temperaturecheck: true
            }
        },
    errorPlacement: function(error, element) {
         if (element.attr("name") == "city" )
         {
            error.appendTo('#townerror');
         }
         if (element.attr("name") == "states" )
         {
            error.appendTo('#Stateerror');
         }
          if (element.attr("name") == "address" )
         {
            error.appendTo('#streetaddresserror');
         }
    },
 
        
       messages: {
				address: {
					required: 'Please Enter the Street'
				},
           
               city: {
                required: "Please enter the city"
            },
             states: {
                required: "Please enter the State"
            }
			},
        
         submitHandler: function(form) {
    printObj();
  }
    
    });
	
                    	//	$('#forms').submit(printObj);

                      $("#clear").on('click', clearf);
                    });
   
    //Functions for tab 3 start here########################################################################################################
   //Functions for tab 3 start here
     function settab3data(json)
        {
           
            for(var i=1;i<=7;i++)
            {
				var stamp = new Date(Number((json.daily.data[i].time)*1000));;
				var month1 = stamp.getMonth();
				var day1 = stamp.getDay();
				var year = stamp.getYear();
				var hours = stamp.getHours();
				
                
                
        var temperatureValue = $("input[name=temp]:checked").val();
                var degree;var pressure1,ws,visibility1;
           if(temperatureValue =="Fahrenheit")
            {
                 degree ="&deg;";
                pressure1 ="mb";
                ws = "mph";
                visibility1 =  "mi";
            }
            else
            {
                 degree ="&deg;";
                pressure1 ="hPa";
                ws = "m/s";
                visibility1 =  "mi";
            }

                
                
				 var month;
				//converting number to month to display	
				 switch(month1)
				 {
						case 0:
							month = "Jan";break;
						case 1:
							month = "Feb";break;
						case 2:
						  month = "Mar";break;
						case 3:
						   month = "Apr";break;
						case 4:
							month = "May";break;
						case 5:
							month = "June";break;
						case 6:
						   month = "July";break;
						case 7:
						   month = "Aug";break;
						case 8:
							month = "Sept";break;
						case 9:
						   month = "Oct";break;
						case 10:
						   month = "Nov";break;
						case 11:
						   month = "Dec";break;
						default:
							month = "Unknown";
				}
				var day ;
						
						//Converting date int value to String. 
				switch(day1)
				{
					case 0:
						day = "Sunday";	break;
					case 1:
						day = "Monday";break;
					case 2:
					  day = "Tuesday";break;
					case 3:
					   day = "Wednesday";break;
					case 4:
						day = "Thursday";break;
					case 5:
						day = "Friday";break;
					case 6:
					   day = "Saturday";break;
					default:
						day = "Unknown";
				}
				
				var date127 = stamp.getDate();    
				
				
				//setting values in the each day data line
				$("#value"+i+"Line1").html("<p><span style=\"color:white;\">"+day+"</span></p>");
				$("#value"+i+"Line2").html("<p><span style=\"color:white;\">"+month+" "+date127+"</span></p>");
				var picture = ReturnImage(json.daily.data[i].icon);
				$("#value"+i+"Line3").html("<img width='60px' id='pic"+i+"'/>");$("#pic"+i+"").attr("src",picture);				
				$("#value"+i+"Line4").html("<span style=\"color:white;\">Min<br>Temp</span>");
				$("#value"+i+"Line5").html("<span style=\"color:white;\">"+Math.floor(json.daily.data[i].temperatureMin)+degree+"</span>");
				$("#value"+i+"Line6").html("<span style=\"color:white;\">Max<br>Temp</span>");
				$("#value"+i+"Line7").html("<span style=\"color:white;\">"+Math.floor(json.daily.data[i].temperatureMax)+degree+"</span>");
				
				
				//modal to be fixed.
                var     city = $("#city").val();
			   setModalLoop(date127,day,month,picture,json.daily.data[i].summary,json.daily.data[i].sunriseTime,json.daily.data[i].sunsetTime,json.daily.data[i].humidity,json.daily.data[i].windSpeed,json.daily.data[i].visibility,i,json.daily.data[i].pressure,json.timezone,city);
            }
        }

    
    function setModalLoop(date127,day,month,pic,desc,sunrise,sunset,humdity,windspeed,visibility,i,pres,timezone,city)
    {   
        
          var temperatureValue = $("input[name=temp]:checked").val();
                var degree;var pressure1,ws,visibility1;
           if(temperatureValue =="Fahrenheit")
            {
                 degree ="&deg;";
                pressure1 ="mb";
                ws = "mph";
                visibility1 =  "mi";
            }
            else
            {
                 degree ="&deg;";
                pressure1 ="hPa";
                ws = "m/s";
                visibility1 =  "mi";
            }

        
        
        
      /*  $("#Iimg"+i).html("<img width='161px;'id='Img"+i+"'/>");
        $("#Img"+i+"").attr("src",pic);
        $("#mode"+i).html("<p>"+desc+"</p>");
        $("#sunrise"+i).html("<p class='boldedtext'>Sunrise</p><p>"+sunrise+"</p>");
        $("#sunset"+i).html("<p class='boldedtext'>SunSet</p><p>"+sunset+"</p>");
        $("#humidity"+i).html("<p class='boldedtext'>Humiditity</p><p>"+humdity+"</p>");
        $("#windspeed"+i).html("<p class='boldedtext'>Windspeed</p><p>"+windspeed+"</p>");
        $("#visibility"+i).html("<p class='boldedtext'>Visibility</p><p>"+visibility+"</p>");
        $("#Pressure"+i).html("<p class='boldedtext'>Pressure</p><p>"+pres+"mb</p>");*/
        
        $("#myModalLabel"+i).html("Weather in  "+city+" on "+month+" "+date127+"");
       
		  $("#Iimg"+i).html("<img width='161px;'id='Img"+i+"'/>");
          
        
        
        
        
        
        
        $("#Img"+i+"").attr("src",pic);
        $("#mode"+i).html("<p>"+day+":<span style=\"color: orange;\">"+desc+"</span></p>");
        
        
        var format = ' hh:mm A';
				var temp = moment( sunrise * 1000).tz(timezone).format(format);
				
			
        
    var format = ' hh:mm A';
				var temp2 = moment( sunset * 1000).tz(timezone).format(format);
				
        var final_visibility;
        if(visibility == undefined) final_visibility="NA";
         else   
        final_visibility = visibility+visibility1;
        
        
      
        $("#sunrise"+i).html("<p class='boldedtext'>Sunrise Time</p><p>"+temp+"</p>");
        $("#sunset"+i).html("<p class='boldedtext'>Sunset Time</p><p>"+temp2+"</p>");
        $("#humidity"+i).html("<p class='boldedtext'>Humiditity</p><p>"+(Math.floor((humdity)*100))+"%</p>");
        $("#windspeed"+i).html("<p class='boldedtext'>Wind Speed</p><p>"+windspeed+ws+"</p>");
        $("#visibility"+i).html("<p class='boldedtext'>Visibility</p><p>"+final_visibility+"</p>");
         $("#Pressure"+i).html("<p class='boldedtext'>Pressure</p><p>"+pres+pressure1+"</p>");
        
    }
    
    //Functions for tab 3 ends here########################################################################################################
    </script>
    
    </div>
     </form>
    </body>
       
    
</head>
</html>




